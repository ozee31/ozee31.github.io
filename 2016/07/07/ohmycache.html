<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="OhMyCache est une librairie basée sur les api LocalStorage et SessionStorage qui vous permet de stocker facilement sur le navigateur du client n'importe quel type de données (string, int, array, objets...)">

    <title>[js] OhMyCache - Flavien BENINCA (ozee31)</title>

    <link rel="canonical" href="http://ozee31.github.io/2016/07/07/ohmycache.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Perso CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="http://ozee31.github.io/feed.xml" title="Flavien BENINCA (ozee31)" />

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Flavien BENINCA (ozee31)</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Blog</a>
                </li>
                
          				
                    <li>
                      <a href="/about.html">A propos</a>
                    </li>
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                
          				
                    <li>
                      <a href="/projects.html">Projets</a>
                    </li>
          				
                
          				
                
          				
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header intro-header--post" style="
  
    background-image: url('/img/js.png');
  
  
    background-color: #323330;
  
">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="heading-title">
                        <h1>[js] OhMyCache</h1>
                        
                        <h2 class="subheading">OhMyCache est une librairie basée sur les api LocalStorage et SessionStorage qui vous permet de stocker facilement sur le navigateur du client n'importe quel type de données (string, int, array, objets...)</h2>
                        
                        <span class="meta">Posté par Flavien BENINCA (ozee31) le 7 juillet 2016</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<h1 id="nouveau-projet-stable--ohmycache">Nouveau projet stable : OhMyCache</h1>

<h2 id="ohmycache-">OhMyCache ?</h2>

<p>OhMyCache est une librairie basée sur les API <a href="https://developer.mozilla.org/fr/docs/Web/API/Window/localStorage">LocalStorage</a> et <a href="https://developer.mozilla.org/fr/docs/Web/API/Window/sessionStorage">SessionStorage</a> qui vous permet de stocker facilement sur le navigateur du client n’importe quel type de données (string, int, array, objets…).</p>

<p>De plus il est possible d’enregistrer des données temporaire ou encore en lecture seule.</p>

<h2 id="techniquement-cest-comment-">Techniquement c’est comment ?</h2>

<p>J’ai créé le projet grâce à <a href="https://webpack.github.io/">webpack</a>, on a donc du ECMAScript 2015, du ESLint tout ça pour finir avec une librairie <a href="https://github.com/umdjs/umd">UMD</a>.</p>

<p>La librairie n’utilise aucune dépendance externe, elle est compatible avec les navigateurs possédant les API LocalStorage et SessionStorage (soit IE 8+, Chrome, Firefox…).</p>

<p>Enfin la librairie est testé grâce à <a href="http://jasmine.github.io/">Jasmine</a>.</p>

<h2 id="je-la-trouve-o-cette-librairie-">Je la trouve où cette librairie ?</h2>

<p>Les sources sont sur <a href="https://github.com/ozee31/ohmycache/">github</a> et le projet peut être installé avec <code class="highlighter-rouge">npm</code> ou <code class="highlighter-rouge">bower</code>.</p>

<p>La documentation est, elle, accessible <a href="http://www.flavienbeninca.fr/ohmycache/">ici</a>.</p>

<h2 id="une-petite-dmo-">Une petite démo ?</h2>

<p>Bien sûr, même plusieurs vu qu’on peut importer la librairie avec <code class="highlighter-rouge">import</code>, <code class="highlighter-rouge">require</code> ou à l’ancienne via la balise <code class="highlighter-rouge">&lt;script&gt;</code>.</p>

<h3 id="ecmascipt-2015">ECMAScipt 2015</h3>

<p>L’avantage de cette technique est que vous pouvez importer seulement la classe dont vous avez besoin. En effet si vous n’utilisez que le <code class="highlighter-rouge">LocalStorage</code> vous allez importer la classe <code class="highlighter-rouge">Local</code> et non la classe <code class="highlighter-rouge">Session</code>.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span><span class="nx">Local</span><span class="p">,</span> <span class="nx">Session</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">'OhMyCache'</span>

<span class="c1">// Je crée un nouvel item dans le cache Local
</span>
<span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Jean'</span><span class="p">)</span>

<span class="c1">// Je crée un nouvel item dans le cache de Session
</span>
<span class="nx">Session</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Alain'</span><span class="p">)</span>

<span class="c1">// Maintenant on va lire les données
</span>
<span class="nx">Local</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Jean
</span>
<span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Alain</span></code></pre></figure>

<h3 id="require">Require</h3>

<p>La même chose avec <code class="highlighter-rouge">require()</code></p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">OhMyCache</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'OhMyCache'</span><span class="p">)</span>

<span class="c1">// Je crée un nouvel item dans le cache Local
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Jean'</span><span class="p">)</span>

<span class="c1">// Je crée un nouvel item dans le cache de Session
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Session</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Alain'</span><span class="p">)</span>

<span class="c1">// Maintenant on va lire les données
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Jean
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Alain</span></code></pre></figure>

<h3 id="script">Script</h3>

<p>Et enfin à l’ancienne</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="c">&lt;!-- si installé via npm --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"node_modules/ohmycache/dist/bundle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

    <span class="c">&lt;!-- si installé via bower --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"bower_components//ohmycache/dist/bundle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

    <span class="c">&lt;!-- si installé à l'arrache --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"lib-path/ohmycache/dist/bundle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script&gt;</span>
    <span class="c1">// Je crée un nouvel item dans le cache Local
</span>
    <span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Jean'</span><span class="p">)</span>

    <span class="c1">// Je crée un nouvel item dans le cache de Session
</span>
    <span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Session</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">,</span> <span class="s1">'Alain'</span><span class="p">)</span>

    <span class="c1">// Maintenant on va lire les données
</span>
    <span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Jean
</span>
    <span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Session</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'prenom'</span><span class="p">)</span> <span class="c1">// Alain
</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></figure>

<h2 id="et-cest-tout-">Et c’est tout ?</h2>

<p>Je vous rassure on peut faire beaucoup plus.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// On peut stocker des objets
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{</span><span class="na">prenom</span><span class="p">:</span> <span class="s1">'Jean'</span><span class="p">,</span> <span class="na">nom</span><span class="p">:</span> <span class="s1">'Bon'</span><span class="p">})</span>

<span class="c1">// On peut faire expirer des données
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'token'</span><span class="p">,</span> <span class="s1">'token_securise'</span><span class="p">,</span> <span class="p">{</span><span class="na">expire</span><span class="p">:</span> <span class="mi">3600</span><span class="p">})</span> <span class="c1">// Notre token expirera dans 1 heure
</span>

<span class="c1">// On peut aussi insérer des données en lecture seule
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'equipe_prefere'</span><span class="p">,</span> <span class="s1">'OM'</span><span class="p">,</span> <span class="p">{</span><span class="na">readonly</span><span class="p">:</span> <span class="kc">true</span><span class="p">})</span> <span class="c1">// return true
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'equipe_prefere'</span><span class="p">,</span> <span class="s1">'PSG'</span><span class="p">)</span> <span class="c1">// return false (en même temps ça devrait être interdit...)
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'equipe_prefere'</span><span class="p">)</span> <span class="c1">// return 'OM'
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">'equipe_prefere'</span><span class="p">)</span> <span class="c1">// return false
</span>
<span class="nx">OhMyCache</span><span class="p">.</span><span class="nx">Local</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'equipe_prefere'</span><span class="p">)</span> <span class="c1">// return 'OM'</span></code></pre></figure>

<h2 id="what-else">What else</h2>

<p>Le projet n’en est qu’à son début mais fonctionne bien (je l’utilise sur divers projets) mais je serais ravis d’avoir vos retours et idées d’amélioration.
J’ai vraiment voulu faire une librairie simple d’utilisation et la plus respectueuse des bonnes pratiques possible.</p>


        <hr>

        <ul class="pager">
          
          <li class="previous">
              <a href="/2016/06/15/vuejs-demarrer-avec-bootstrap.html" data-toggle="tooltip" data-placement="top" title="[vuejs] Démarrer avec bootstrap">&larr; Article précédent</a>
          </li>
          
          
          <li class="next">
              <a href="/2016/07/12/cakephp-3-crosscomain-cors.html" data-toggle="tooltip" data-placement="top" title="[php] CakePHP 3 : Activer le CrossDomain (CORS)">Article suivant &rarr;</a>
          </li>
          
        </ul>

        
          <hr>

          <div id="disqus_thread"></div>

          <script>
            var disqus_config = function() {
              this.page.url = "http://ozee31.github.io/2016/07/07/ohmycache.html"; // Replace PAGE_URL with your page's canonical URL variable
              this.page.identifier = "/2016/07/07/ohmycache"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document,
                s = d.createElement('script');

              s.src = '//flavienbeninca.disqus.com/embed.js';

              s.setAttribute('data-timestamp', + new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
          </noscript>

          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        

      </div>
    </div>
  </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a class="a--nocolor" href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a class="a--nocolor" href="https://github.com/ozee31">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a class="a--nocolor" href="https://www.linkedin.com/in/flavienbeninca">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a class="a--nocolor" href="mailto:contact@flavienbeninca.fr">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53339494-2', 'auto');
  ga('send', 'pageview');

</script>



</body>

</html>
